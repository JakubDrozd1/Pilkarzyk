<ion-header>
  <ion-toolbar>
    <ion-title>{{ nameGroup }} </ion-title>
    <ion-buttons slot="end">
      <ion-back-button
        text=""
        icon="arrow-back-outline"
        defaultHref="/logged/groups"
      >
      </ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-fab slot="fixed" vertical="bottom" horizontal="end">
  <ion-fab-button>
    <ion-icon name="add"></ion-icon>
  </ion-fab-button>
  <ion-fab-list side="top">
    <ion-fab-button expand="block" (click)="openModalAddMeeting()">
      <ion-icon size="large" name="chatbubbles-outline"> </ion-icon>
    </ion-fab-button>
    <ion-fab-button expand="block" (click)="openModalAddUser()">
      <ion-icon size="large" name="person-add-outline"> </ion-icon>
    </ion-fab-button>
  </ion-fab-list>
</ion-fab>

@if(!isReady){
<div style="text-align: center">
  <ion-spinner color="primary" name="crescent"> </ion-spinner>
</div>
}

<ion-segment [(ngModel)]="selectedSegment" swipeGesture="true">
  <ion-segment-button vertical="top" value="meetings">
    <ion-label>Spotkania</ion-label>
  </ion-segment-button>
  <ion-segment-button vertical="top" value="members">
    <ion-label>Członkowie</ion-label>
  </ion-segment-button>
  <ion-segment-button vertical="top" value="ranking">
    <ion-label>Ranking</ion-label>
  </ion-segment-button>
</ion-segment>
<ion-content>
  @if(isReady){ @switch (selectedSegment) { @case ("meetings") {
  <ion-list>
    @if(meetings.length!=0){ @for (item of meetings; track $index) {
    <app-meeting-content [meeting]="item"></app-meeting-content>
    }} @else {
    <ion-item lines="none">Brak nadchodzących spotkań</ion-item>
    }
  </ion-list>
  } @case ("members") {
  <ion-list>
    <ion-card>
      @for (item of groupsUsers; track $index) {
      <ion-card-header>
        <ion-card-title>
          {{ item.Login }}
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item lines="full" class="title">
          @if(images[$index] === '0'){
          <ion-avatar slot="start">
            <img
              alt="img"
              src="https://ionicframework.com/docs/img/demos/avatar.svg"
            />
          </ion-avatar>
          } @else {
          <ion-avatar slot="start">
            <img alt="img" [src]="images[$index]" />
          </ion-avatar>
          }
          <ion-label> {{ item.Firstname }} {{ item.Surname }} </ion-label>
          @if(item.PhoneNumber!=null){
          {{ item.PhoneNumber.toString().slice(0, 3) }}-{{
            item.PhoneNumber.toString().slice(3, 6)
          }}-{{ item.PhoneNumber.toString().slice(6) }}
          }
        </ion-item>
      </ion-card-content>
      }
    </ion-card>
  </ion-list>
  } } }
</ion-content>
